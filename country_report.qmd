---
title: "Country Population Comparisons"
author: "Keith Galli"
echo: False
error: False
warning: False
engine: jupyter
format:
    html: default
---

```{python}
import pandas as pd
from report_helpers import plot_country, population_over_time, gender_ratio, plot_ages, get_country_stat, highlight_text

# Load both data files
df_un = pd.read_csv('./data/un-country-data.csv', low_memory=False)
df_wb = pd.read_csv('./data/worldbank-country-data.csv', low_memory=False)

# Filter by country code
df_country_un = df_un[df_un['ISO3_code'] == country_code]
df_country_wb = df_wb[df_wb['Country Code'] == country_code]

# Set the index to Year
df_country_un.set_index('Time', inplace=True)
```


```{python}
import plotly.express as px
import pandas as pd

DEFAULT_COUNTRIES = ['ARG', 'FRA', 'GBR', 'POL']

# Assuming df_un is your original dataframe
df_un_simple = df_un[['Time', 'ISO3_code', 'TPopulation1July']].copy()
df_un_simple = df_un_simple.sort_values(['ISO3_code', 'Time'])
df_un_simple['TPopulation1July'] = df_un_simple['TPopulation1July'] * 1000  # Population is in thousands, get full population

# Filter only to years 1950 to 2024
df_un_simple = df_un_simple[(df_un_simple['Time'] >= 1950) & (df_un_simple['Time'] <= 2024)]

# Create the figure
fig = px.line(df_un_simple, 
              x='Time', 
              y='TPopulation1July', 
              color='ISO3_code', 
              title='Population Over Time')

# Update traces visibility
for trace in fig.data:
    trace.visible = 'legendonly' if trace.name not in DEFAULT_COUNTRIES else True

fig.show()

```